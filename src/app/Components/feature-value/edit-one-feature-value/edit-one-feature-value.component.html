<app-back-button routerLink="/featureModel/edit/one"></app-back-button>


<div *ngIf="featureModel != undefined" class="full-page-container">
    <h2 class="text" style="margin-top: 5rem">{{featureModel.name}}</h2>

    <div class="flex-center" style="width: 100%">

        <p-table dataKey="id"
                 styleClass="p-datatable-sm p-datatable-gridlines p-datatable-striped"
                 [value]="featureModel.values" [totalRecords]="featureModel.values.length"
                 [tableStyle]="{'width': '60vh'}" [scrollable]="true" scrollHeight="65vh">

            <ng-template pTemplate="header">
                <tr>
                    <th>Valeur</th>

                    <th *ngFor="let shop of getModelShops()">
                        Id {{Shop.toString(shop)}}
                    </th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-featureValue>
                <tr>
                    <td class="cell">
                        <input class="display-as-text" [(ngModel)]="featureValue.value"/>
                    </td>

                    <!-- Logically every feature value should have the instance the same shopSpecific as it's model -->
                    <!-- Else it would be a shame -->

                    <td *ngFor="let shop of getModelShops()">
                        {{ getIdPrestashopByShop(featureValue, shop) }}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>


    <div class="flex-center changes-footer">
        <button pButton label="Annuler" class="p-button-danger"
                (click)="reset()"></button>
        <button pButton label="Enregistrer" class="p-button-success"
                (click)="save()"></button>
    </div>
</div>

